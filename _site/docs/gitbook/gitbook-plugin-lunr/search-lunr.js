require(["gitbook","jquery"],function(e,t){function r(){this.index=null,this.store={},this.name="LunrSearchEngine"}r.prototype.init=function(){var r=this,n=t.Deferred();return t.getJSON(e.state.basePath+"/search_index.json").then(function(e){r.index=lunr.Index.load(e.index),r.store=e.store,n.resolve()}),n.promise()},r.prototype.search=function(e,r,n){var i=this,s=[];return this.index&&(s=t.map(this.index.search(e),function(e){var t=i.store[e.ref];return{title:t.title,url:t.url,body:t.summary||t.body}})),t.Deferred().resolve({query:e,results:s.slice(0,n),count:s.length}).promise()},e.events.bind("start",function(t,n){var i=e.search.getEngine();i||e.search.setEngine(r,n)})});