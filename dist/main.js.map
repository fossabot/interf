{"version":3,"sources":["main.js"],"names":["interf","require","Sellable","create","name","Crewable","Flyable","Living","Speakable","Quackable","Swimming","Walking","Thing","Plane","implement","in","constructor","price","super","crew","fuel","fly","Animal","animalProp","Duck","RedHeadDuck","instanceOf","Constructor","static","QuackableRedHeadDuck","TESTS","warn","log","logInst","obj","expected","result","isInterfaceOf","mrija","donald","mike","arnold","window","a","b","c","startMrija","Date","now","i","Object","resMrija","startDonald","resDonald","startMike","resMike","startArnold","resArnold","sum","avg"],"mappings":"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","file":"main.js","sourcesContent":["// import interf from './interf';\nconst interf = require('./interf');\n\nconst Sellable = interf.create({ name: 'Sellable' });\n\nconst Crewable = interf.create('Crewable');\n\nconst Flyable = interf.create('Flyable');\n\nconst Living = interf.create('Living');\n\nconst Speakable = interf.create('Speakable');\n\n// interface Quackable extends Living, Speakable\nconst Quackable = interf.create('Quackable', [Living, Speakable]);\n\n// interface Swimming extends Living\nconst Swimming = interf.create('Swimming', [Living]);\n\nconst Walking = interf.create('Walking');\n\nclass Thing {}\nconst Plane = interf.implement(Sellable).in(\n  interf.implement(Flyable).in(\n    interf.implement(Crewable).in(\n      class Plane extends Thing {\n        constructor(price) {\n          super();\n          this.price = price;\n          this.crew = [];\n          this.fuel = 0;\n        }\n\n        fly() {\n          if (this.fuel > 0) return 'Flying!';\n          return false;\n        }\n      }\n    )\n  )\n);\nclass Animal {\n  constructor() {\n    this.animalProp = 0;\n  }\n}\nconst Duck = interf\n  .implement(Living, Quackable, Swimming, Flyable, Sellable)\n  .in(class Duck extends Animal {});\n\nclass RedHeadDuck extends Duck {\n  instanceOf(Constructor) {\n    return super.instanceOf(Constructor);\n  }\n}\n\nRedHeadDuck.static = () => 'static';\nconst QuackableRedHeadDuck = interf\n  .implement([Quackable, Walking])\n  .in(class QuackableRedHeadDuck extends RedHeadDuck {});\n\nconst TESTS = 1;\n\nfunction warn(...args) {\n  console.warn(...args);\n}\n\nfunction log(...args) {\n  console.log(...args);\n}\nfunction logInst(obj, Constructor, expected) {\n  // const result = obj.instanceOf(Constructor);\n  const result =\n    (typeof Constructor.isInterfaceOf === 'function' && Constructor.isInterfaceOf(obj)) ||\n    (typeof Constructor === 'function' && obj instanceof Constructor);\n  if (result !== expected) {\n    warn('Instance fail', obj.constructor.name, Constructor.name, result, expected);\n  }\n}\n\nconst mrija = new Plane(200000);\nconst donald = new Duck();\nconst mike = new RedHeadDuck();\nconst arnold = new QuackableRedHeadDuck();\nwindow.interf = interf;\nwindow.a = arnold;\nwindow.b = QuackableRedHeadDuck;\nwindow.c = mike;\nlog('start TESTS');\nconst startMrija = Date.now();\nfor (let i = 0; i < TESTS; i += 1) {\n  logInst(mrija, Sellable, true);\n  logInst(mrija, Flyable, true);\n  logInst(mrija, Crewable, true);\n  logInst(mrija, Living, false);\n  logInst(mrija, Speakable, false);\n  logInst(mrija, Quackable, false);\n  logInst(mrija, Swimming, false);\n  logInst(mrija, Animal, false);\n  logInst(mrija, Plane, true);\n  logInst(mrija, Duck, false);\n  logInst(mrija, Thing, true);\n  logInst(mrija, Object, true);\n}\nconst resMrija = Date.now() - startMrija;\nlog('mrija duration', resMrija);\n\nconst startDonald = Date.now();\nfor (let i = 0; i < TESTS; i += 1) {\n  logInst(donald, Sellable, true);\n  logInst(donald, Flyable, true);\n  logInst(donald, Crewable, false);\n  logInst(donald, Living, true);\n  logInst(donald, Speakable, true);\n  logInst(donald, Quackable, true);\n  logInst(donald, Swimming, true);\n  logInst(donald, Animal, true);\n  logInst(donald, Plane, false);\n  logInst(donald, Duck, true);\n  logInst(donald, Thing, false);\n  logInst(donald, Object, true);\n}\nconst resDonald = Date.now() - startDonald;\nlog('donald duration', resDonald);\n\nconst startMike = Date.now();\nfor (let i = 0; i < TESTS; i += 1) {\n  logInst(mike, QuackableRedHeadDuck, false);\n  logInst(mike, RedHeadDuck, true);\n  logInst(mike, Crewable, false);\n  logInst(mike, Living, true);\n  logInst(mike, Speakable, true);\n  logInst(mike, Quackable, true);\n  logInst(mike, Walking, false);\n  logInst(mike, Animal, true);\n  logInst(mike, Plane, false);\n  logInst(mike, Duck, true);\n  logInst(mike, Thing, false);\n  logInst(mike, Object, true);\n}\nconst resMike = Date.now() - startMike;\nlog('mike duration', resMike);\n\nconst startArnold = Date.now();\nfor (let i = 0; i < TESTS; i += 1) {\n  logInst(arnold, QuackableRedHeadDuck, true);\n  logInst(arnold, Walking, true);\n  logInst(arnold, Crewable, false);\n  logInst(arnold, Living, true);\n  logInst(arnold, Speakable, true);\n  logInst(arnold, Quackable, true);\n  logInst(arnold, Swimming, true);\n  logInst(arnold, Animal, true);\n  logInst(arnold, Plane, false);\n  logInst(arnold, Duck, true);\n  logInst(arnold, Thing, false);\n  logInst(arnold, Object, true);\n}\nconst resArnold = Date.now() - startArnold;\nlog('arnold duration', resArnold);\nconst sum = resMrija + resDonald + resMike + resArnold;\nconst avg = sum / TESTS / 48;\nlog('sum', sum, 'avg', avg, 'TESTS', TESTS);\n// // const nodee = document.createElement('LI');\n// // const textnode = document.createTextNode(`sum ${sum}, avg ${avg}`);\n// // nodee.appendChild(textnode);\n// // // console.log(document.getElementById('list'));\n// // document.getElementById('list').appendChild(nodee);\n\nlog('Main ready!');\n"]}